---
title: 扫描二维码打开智能小程序
header: introduction
nav: book
sidebar: scancode
---
智能小程序平台开放扫描普通链接二维码跳转小程序能力，兼容线下已有的二维码，方便小程序开发者更便捷地推广小程序。

功能介绍
---

* 普通链接二维码：是指开发者使用工具对网页链接进行编码后生成的二维码。
* 线下商户可不需更换线下二维码，在智能小程序后台完成配置后，即可在用户扫描普通链接二维码时打开小程序，使用小程序的功能。
* 对于普通链接二维码，目前支持使用百度App“扫一扫”识别二维码跳转小程序。

开放范围
---
企业、媒体、政府及其他组织类型小程序。

二维码跳转规则
---
**注意：从2018年8月开始，百度App支持二维码规则根据“子路径匹配”。如原有二维码链接为 `https://www.baidu.com/a/123456`，其中123456为业务参数，则可配置规则 `https://www.baidu.com/a/` 实现扫码打开小程序。**

百度App扫码将按以下匹配规则控制跳转：
* 二维码链接的协议、域名与已配置的二维码规则一致。
* 二维码链接属于后台配置的二维码规则的子路径。（如需支持子路径匹配，请确认后台配置的二维码规则以/结尾）
* 如果二维码规则包含参数，链接?后为参数部分，参数要求前缀匹配。

常见匹配错误类型：

|后台已配置的二维码规则|线下二维码完整链接|错误原因|
|----|----|----|
|`https://www.baidu.com/a/b`	|`https://www.baidu.com/a/b ` |协议不一致|
|`https://www.baidu.com/a/b	`|`https://www.m.baidu.com/a/b`	|域名不一致|
|`https://www.baidu.com/a/b?id=123`	|`https://www.baidu.com/a/b?id=132`	|参数不满足前缀匹配|
|`https://www.baidu.com/a/b`	|`https://www.baidu.com/a/bc`	|不属于子路径|
|`https://www.baidu.com/a/b`	|`https://www.baidu.com/a/b/123`	|规则没有以/结尾，不支持子路径匹配|


二维码内容获取
---
1、在智能小程序后台配置二维码跳转小程序规则；
2、使用百度App（10.12及其以上客户端版本）扫码打开小程序；
3、二维码链接内容会以参数 q 的形式带给页面，在 onLoad 事件中提取 q 参数并自行 decodeURIComponent 一次，即可获取原二维码的完整内容。

配置流程
---
1、登录智能小程序后台，进入“设置-开发设置-扫普通二维码打开小程序”，单击“添加”配置二维码规则。

![图片](../../img/introduction/scancode/scancode-01.png)

2、填写二维码规则，设置开发者需要填写需要跳转小程序的二维码规则：
  &ensp; &ensp;&ensp;&ensp; · 二维码规则的域名须通过ICP备案的验证。
  &ensp; &ensp;&ensp;&ensp; · 支持 http、https、ftp 开头的链接（如：`https://www.baidu.com`、`https://www.baidu.com/mp/`、`https://www.baidu.com/mp?id=123`）。
  &ensp; &ensp;&ensp;&ensp; · 一个小程序帐号可配置不多于10个二维码前缀规则。
  ![图片](../../img/introduction/scancode/scancode-03.png)
3、校验文件：
  &ensp; &ensp;&ensp;&ensp; · 下载随机校验文件，并将文件上传至服务器指定位置的目录下，方可通过所属权校验。
  &ensp; &ensp;&ensp;&ensp; · 验证文件放置规则： 放置于URL中声明的最后一级子目录下，若无子目录，则放置于host所属服务器的顶层目录下。
  &ensp; &ensp;&ensp;&ensp; ·  请根据页面提示将验证文件放置在指定的目录下。

4、填写小程序功能页面，如**：pages/index/index** 。
5、选择前缀占用规则：开发者可选择是否占用符合二维码匹配规则的所有子规则。如选择占用，则其他帐号不可申请使用满足该前缀匹配规则的其他子规则。
如：
&ensp; &ensp;&ensp;&ensp;若开发者A配置二维码规则：`https://www.baidu.com/mp?id=123`，并选择“占用所有子规则“，其他开发者将不可以配置满足前缀匹配的子规则如`https://www.baidu.com/mp?id=1234`。
当出现以下提示，请联系对应小程序开发者进行沟通解决：
![图片](../../img/introduction/scancode/scancode-02.png)
6、测试链接：填写符合二维码前缀匹配规则的二维码完整链接用于测试。
&ensp; &ensp;&ensp;&ensp; · 一个规则可以填写不多于5个测试链接，可多次修改；
&ensp; &ensp;&ensp;&ensp; · 若二维码与测试链接匹配，且用户是小程序指定的管理员、开发者或体验者，将打开指定版本的小程序；
&ensp; &ensp;&ensp;&ensp; · 测试仅对指定的测试链接和测试范围内的百度App用户生效，其他用户扫码后跳转网页，不影响全网用户正常使用；
&ensp; &ensp;&ensp;&ensp; · 在二维码规则发布后，开发者仍然可以选择在指定版本（开发版/体验版/线上版）下测试；
&ensp; &ensp;&ensp;&ensp; · 开发者可根据开发进度选择在开发版、体验版、线上版本测试“普通二维码跳转小程序”的功能。
![图片](../../img/introduction/scancode/scancode-04.png)
7、单击“保存并提交”完成二维码规则的添加。

发布
---
测试完成后开发者可将二维码跳转规则发布现网，发布后扫描所有符合匹配规则的二维码，将跳转至指定的小程序页面。

**·** 最多可添加10个二维码规则地址；
**·** 一个小程序账号一个月最多发布20次二维码跳转规则；
**·** 为确保用户体验，小程序必须先发布代码才可以发布二维码跳转规则。
